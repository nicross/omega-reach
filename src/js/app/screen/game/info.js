app.screen.game.info = (() => {
  const attributesElement = document.querySelector('.a-game--attributes'),
    descriptionElement = document.querySelector('.a-game--description'),
    nameElement = document.querySelector('.a-game--name')

  function getRoomInfo() {
    const room = content.location.get()

    return {
      attributes: room.getAttributeLabels(),
      description: room.getDescription(),
      descriptionModifier: room.getDescriptionModifier(),
      isComplete: room.isComplete(),
      isDiscovered: room.isDiscovered(),
      name: room.getName(),
      nameShort: room.getNameShort(),
    }
  }

  return {
    update: function () {
      const {
        attributes,
        description,
        descriptionModifier,
        isComplete,
        isDiscovered,
        name,
        nameShort,
      } = getRoomInfo()

      descriptionElement.innerHTML = description
      nameElement.ariaLabel = nameShort
      nameElement.innerHTML = name

      attributesElement.innerHTML = (isComplete ? `<li class="a-game--attribute a-game--attribute-complete"><i aria-hidden="true">âœ“</i>Complete</li>` : '')
        + attributes.map(
            ({label, modifiers}) => `<li class="a-game--attribute${modifiers.map((modifier) => ` a-game--attribute-${modifier}`).join('')}">${label}</li>`
          ).join('')

      descriptionElement.className = 'a-game--description'

      if (descriptionModifier) {
        descriptionElement.classList.add(`a-game--description-${descriptionModifier}`)
      }

      if (!isDiscovered) {
        descriptionElement.classList.add('a-game--description-undiscovered')
      }

      return this
    },
  }
})()
